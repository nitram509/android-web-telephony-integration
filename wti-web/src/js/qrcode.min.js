// QR Code Generator for JavaScript
// Copyright (c) 2009 Kazuhiko Arase
// URL: http://www.d-project.com/
// Licensed under the MIT license:
//	http://www.opensource.org/licenses/mit-license.php
// The word 'QR Code' is registered trademark of
// DENSO WAVE INCORPORATED
//	http://www.denso-wave.com/qrcode/faqpatent-e.html
var qrcode=function(){function y(g,h){if("undefined"==typeof g.length)throw Error(g.length+"/"+h);var a=function(){for(var b=0;b<g.length&&0==g[b];)b+=1;for(var c=Array(g.length-b+h),d=0;d<g.length-b;d+=1)c[d]=g[d+b];return c}(),b={getAt:function(b){return a[b]},getLength:function(){return a.length},multiply:function(f){for(var c=Array(b.getLength()+f.getLength()-1),d=0;d<b.getLength();d+=1)for(var a=0;a<f.getLength();a+=1)c[d+a]^=r.gexp(r.glog(b.getAt(d))+r.glog(f.getAt(a)));return y(c,0)},mod:function(f){if(0>
b.getLength()-f.getLength())return b;for(var c=r.glog(b.getAt(0))-r.glog(f.getAt(0)),d=Array(b.getLength()),a=0;a<b.getLength();a+=1)d[a]=b.getAt(a);for(a=0;a<f.getLength();a+=1)d[a]^=r.gexp(r.glog(f.getAt(a))+c);return y(d,0).mod(f)}};return b}var A=function(g,h){var a=s[h],b=null,f=0,c=null,d=[],e={},l=function(e,h){for(var m=f=4*g+17,k=Array(m),n=0;n<m;n+=1){k[n]=Array(m);for(var l=0;l<m;l+=1)k[n][l]=null}b=k;z(0,0);z(f-7,0);z(0,f-7);m=x.getPatternPosition(g);for(k=0;k<m.length;k+=1)for(n=0;n<
m.length;n+=1){var l=m[k],w=m[n];if(null==b[l][w])for(var u=-2;2>=u;u+=1)for(var p=-2;2>=p;p+=1)b[l+u][w+p]=-2==u||2==u||-2==p||2==p||0==u&&0==p?!0:!1}for(m=8;m<f-8;m+=1)null==b[m][6]&&(b[m][6]=0==m%2);for(m=8;m<f-8;m+=1)null==b[6][m]&&(b[6][m]=0==m%2);m=x.getBCHTypeInfo(a<<3|h);for(k=0;15>k;k+=1)n=!e&&1==(m>>k&1),6>k?b[k][8]=n:8>k?b[k+1][8]=n:b[f-15+k][8]=n;for(k=0;15>k;k+=1)n=!e&&1==(m>>k&1),8>k?b[8][f-k-1]=n:9>k?b[8][15-k-1+1]=n:b[8][15-k-1]=n;b[f-8][8]=!e;if(7<=g){m=x.getBCHTypeNumber(g);for(k=
0;18>k;k+=1)n=!e&&1==(m>>k&1),b[Math.floor(k/3)][k%3+f-8-3]=n;for(k=0;18>k;k+=1)n=!e&&1==(m>>k&1),b[k%3+f-8-3][Math.floor(k/3)]=n}if(null==c){m=D.getRSBlocks(g,a);k=E();for(n=0;n<d.length;n+=1)l=d[n],k.put(l.getMode(),4),k.put(l.getLength(),x.getLengthInBits(l.getMode(),g)),l.write(k);for(n=l=0;n<m.length;n+=1)l+=m[n].dataCount;if(k.getLengthInBits()>8*l)throw Error("code length overflow. ("+k.getLengthInBits()+">"+8*l+")");for(k.getLengthInBits()+4<=8*l&&k.put(0,4);0!=k.getLengthInBits()%8;)k.putBit(!1);
for(;!(k.getLengthInBits()>=8*l);){k.put(236,8);if(k.getLengthInBits()>=8*l)break;k.put(17,8)}for(var v=0,l=n=0,w=Array(m.length),u=Array(m.length),p=0;p<m.length;p+=1){var r=m[p].dataCount,s=m[p].totalCount-r,n=Math.max(n,r),l=Math.max(l,s);w[p]=Array(r);for(var q=0;q<w[p].length;q+=1)w[p][q]=255&k.getBuffer()[q+v];v+=r;q=x.getErrorCorrectPolynomial(s);r=y(w[p],q.getLength()-1).mod(q);u[p]=Array(q.getLength()-1);for(q=0;q<u[p].length;q+=1)s=q+r.getLength()-u[p].length,u[p][q]=0<=s?r.getAt(s):0}for(q=
k=0;q<m.length;q+=1)k+=m[q].totalCount;k=Array(k);for(q=v=0;q<n;q+=1)for(p=0;p<m.length;p+=1)q<w[p].length&&(k[v]=w[p][q],v+=1);for(q=0;q<l;q+=1)for(p=0;p<m.length;p+=1)q<u[p].length&&(k[v]=u[p][q],v+=1);c=k}m=c;k=-1;n=f-1;l=7;w=0;u=x.getMaskFunction(h);for(p=f-1;0<p;p-=2)for(6==p&&(p-=1);;){for(q=0;2>q;q+=1)null==b[n][p-q]&&(v=!1,w<m.length&&(v=1==(m[w]>>>l&1)),u(n,p-q)&&(v=!v),b[n][p-q]=v,l-=1,-1==l&&(w+=1,l=7));n+=k;if(0>n||f<=n){n-=k;k=-k;break}}},z=function(c,d){for(var a=-1;7>=a;a+=1)if(!(-1>=
c+a||f<=c+a))for(var e=-1;7>=e;e+=1)-1>=d+e||f<=d+e||(b[c+a][d+e]=0<=a&&6>=a&&(0==e||6==e)||0<=e&&6>=e&&(0==a||6==a)||2<=a&&4>=a&&2<=e&&4>=e?!0:!1)};e.addData=function(b){b=F(b);d.push(b);c=null};e.isDark=function(a,c){if(0>a||f<=a||0>c||f<=c)throw Error(a+","+c);return b[a][c]};e.getModuleCount=function(){return f};e.make=function(){for(var b=0,a=0,c=0;8>c;c+=1){l(!0,c);var d=x.getLostPoint(e);if(0==c||b>d)b=d,a=c}l(!1,a)};e.createTableTag=function(b,a){b=b||2;var c;c='<table style=" border-width: 0px; border-style: none;';
c+=" border-collapse: collapse;";c+=" padding: 0px; margin: "+("undefined"==typeof a?4*b:a)+"px;";c+='">';c+="<tbody>";for(var d=0;d<e.getModuleCount();d+=1){c+="<tr>";for(var f=0;f<e.getModuleCount();f+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+b+"px;",c+=" height: "+b+"px;",c+=" background-color: ",c+=e.isDark(d,f)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}c+="</tbody>";return c+="</table>"};
e.createImgTag=function(c,b){c=c||2;b="undefined"==typeof b?4*c:b;var a=e.getModuleCount()*c+2*b,d=b,f=a-b;return G(a,a,function(b,a){return d<=b&&b<f&&d<=a&&a<f?e.isDark(Math.floor((a-d)/c),Math.floor((b-d)/c))?0:1:1})};return e};A.stringToBytes=function(g){for(var h=[],a=0;a<g.length;a+=1){var b=g.charCodeAt(a);h.push(b&255)}return h};A.createStringToBytes=function(g,h){var a=function(){for(var b=H(g),a=function(){var c=b.read();if(-1==c)throw Error();return c},c=0,d={};;){var e=b.read();if(-1==
e)break;var l=a(),z=a(),C=a(),e=String.fromCharCode(e<<8|l);d[e]=z<<8|C;c+=1}if(c!=h)throw Error(c+" != "+h);return d}();return function(b){for(var f=[],c=0;c<b.length;c+=1){var d=b.charCodeAt(c);128>d?f.push(d):(d=a[b.charAt(c)],"number"==typeof d?(d&255)==d?f.push(d):(f.push(d>>>8),f.push(d&255)):f.push(63))}return f}};var s={L:1,M:0,Q:3,H:2},x=function(){var g=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],
[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],h={},a=function(b){for(var a=
0;0!=b;)a+=1,b>>>=1;return a};h.getBCHTypeInfo=function(b){for(var f=b<<10;0<=a(f)-a(1335);)f^=1335<<a(f)-a(1335);return(b<<10|f)^21522};h.getBCHTypeNumber=function(b){for(var f=b<<12;0<=a(f)-a(7973);)f^=7973<<a(f)-a(7973);return b<<12|f};h.getPatternPosition=function(b){return g[b-1]};h.getMaskFunction=function(b){switch(b){case 0:return function(b,c){return 0==(b+c)%2};case 1:return function(b,c){return 0==b%2};case 2:return function(b,c){return 0==c%3};case 3:return function(b,c){return 0==(b+
c)%3};case 4:return function(b,c){return 0==(Math.floor(b/2)+Math.floor(c/3))%2};case 5:return function(b,c){return 0==b*c%2+b*c%3};case 6:return function(b,c){return 0==(b*c%2+b*c%3)%2};case 7:return function(b,c){return 0==(b*c%3+(b+c)%2)%2};default:throw Error("bad maskPattern:"+b);}};h.getErrorCorrectPolynomial=function(b){for(var a=y([1],0),c=0;c<b;c+=1)a=a.multiply(y([1,r.gexp(c)],0));return a};h.getLengthInBits=function(b,a){if(1<=a&&10>a)switch(b){case 1:return 10;case 2:return 9;case 4:return 8;
case 8:return 8;default:throw Error("mode:"+b);}else if(27>a)switch(b){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw Error("mode:"+b);}else if(41>a)switch(b){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw Error("mode:"+b);}else throw Error("type:"+a);};h.getLostPoint=function(b){for(var a=b.getModuleCount(),c=0,d=0;d<a;d+=1)for(var e=0;e<a;e+=1){for(var l=0,g=b.isDark(d,e),h=-1;1>=h;h+=1)if(!(0>d+h||a<=d+h))for(var t=-1;1>=t;t+=
1)0>e+t||a<=e+t||0==h&&0==t||g!=b.isDark(d+h,e+t)||(l+=1);5<l&&(c+=3+l-5)}for(d=0;d<a-1;d+=1)for(e=0;e<a-1;e+=1)if(l=0,b.isDark(d,e)&&(l+=1),b.isDark(d+1,e)&&(l+=1),b.isDark(d,e+1)&&(l+=1),b.isDark(d+1,e+1)&&(l+=1),0==l||4==l)c+=3;for(d=0;d<a;d+=1)for(e=0;e<a-6;e+=1)b.isDark(d,e)&&!b.isDark(d,e+1)&&b.isDark(d,e+2)&&b.isDark(d,e+3)&&b.isDark(d,e+4)&&!b.isDark(d,e+5)&&b.isDark(d,e+6)&&(c+=40);for(e=0;e<a;e+=1)for(d=0;d<a-6;d+=1)b.isDark(d,e)&&!b.isDark(d+1,e)&&b.isDark(d+2,e)&&b.isDark(d+3,e)&&b.isDark(d+
4,e)&&!b.isDark(d+5,e)&&b.isDark(d+6,e)&&(c+=40);for(e=l=0;e<a;e+=1)for(d=0;d<a;d+=1)b.isDark(d,e)&&(l+=1);b=Math.abs(100*l/a/a-50)/5;return c+10*b};return h}(),r=function(){for(var g=Array(256),h=Array(256),a=0;8>a;a+=1)g[a]=1<<a;for(a=8;256>a;a+=1)g[a]=g[a-4]^g[a-5]^g[a-6]^g[a-8];for(a=0;255>a;a+=1)h[g[a]]=a;return{glog:function(b){if(1>b)throw Error("glog("+b+")");return h[b]},gexp:function(b){for(;0>b;)b+=255;for(;256<=b;)b-=255;return g[b]}}}(),D=function(){var g=[[1,26,19],[1,26,16],[1,26,13],
[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16]],h=function(b,c){var a=
{};a.totalCount=b;a.dataCount=c;return a},a={},b=function(a,b){switch(b){case s.L:return g[4*(a-1)+0];case s.M:return g[4*(a-1)+1];case s.Q:return g[4*(a-1)+2];case s.H:return g[4*(a-1)+3]}};a.getRSBlocks=function(a,c){var d=b(a,c);if("undefined"==typeof d)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+c);for(var e=d.length/3,l=[],g=0;g<e;g+=1)for(var r=d[3*g+0],t=d[3*g+1],m=d[3*g+2],k=0;k<r;k+=1)l.push(h(t,m));return l};return a}(),E=function(){var g=[],h=0,a={getBuffer:function(){return g},
getAt:function(a){return 1==(g[Math.floor(a/8)]>>>7-a%8&1)},put:function(b,f){for(var c=0;c<f;c+=1)a.putBit(1==(b>>>f-c-1&1))},getLengthInBits:function(){return h},putBit:function(a){var f=Math.floor(h/8);g.length<=f&&g.push(0);a&&(g[f]|=128>>>h%8);h+=1}};return a},F=function(g){var h=A.stringToBytes(g);return{getMode:function(){return 4},getLength:function(a){return h.length},write:function(a){for(var b=0;b<h.length;b+=1)a.put(h[b],8)}}},B=function(){var g=[],h={writeByte:function(a){g.push(a&255)},
writeShort:function(a){h.writeByte(a);h.writeByte(a>>>8)},writeBytes:function(a,b,f){b=b||0;f=f||a.length;for(var c=0;c<f;c+=1)h.writeByte(a[c+b])},writeString:function(a){for(var b=0;b<a.length;b+=1)h.writeByte(a.charCodeAt(b))},toByteArray:function(){return g},toString:function(){var a;a="[";for(var b=0;b<g.length;b+=1)0<b&&(a+=","),a+=g[b];return a+"]"}};return h},I=function(){var g=0,h=0,a=0,b="",f={},c=function(a){if(!(0>a)){if(26>a)return 65+a;if(52>a)return 97+(a-26);if(62>a)return 48+(a-52);
if(62==a)return 43;if(63==a)return 47}throw Error("n:"+a);};f.writeByte=function(d){g=g<<8|d&255;h+=8;for(a+=1;6<=h;)b+=String.fromCharCode(c(g>>>h-6&63)),h-=6};f.flush=function(){0<h&&(b+=String.fromCharCode(c(g<<6-h&63)),h=g=0);if(0!=a%3)for(var d=3-a%3,e=0;e<d;e+=1)b+="="};f.toString=function(){return b};return f},H=function(g){var h=0,a=0,b=0,f=function(a){if(65<=a&&90>=a)return a-65;if(97<=a&&122>=a)return a-97+26;if(48<=a&&57>=a)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw Error("c:"+
a);};return{read:function(){for(;8>b;){if(h>=g.length){if(0==b)return-1;throw Error("unexpected end of file./"+b);}var c=g.charAt(h);h+=1;if("="==c)return b=0,-1;c.match(/^\s$/)||(a=a<<6|f(c.charCodeAt(0)),b+=6)}c=a>>>b-8&255;b-=8;return c}}},J=function(g,h){var a=Array(g*h),b=function(a){var b=0,e=0;return{write:function(f,g){if(0!=f>>>g)throw Error("length over");for(;8<=b+g;)a.writeByte(255&(f<<b|e)),g-=8-b,f>>>=8-b,b=e=0;e|=f<<b;b+=g},flush:function(){0<b&&a.writeByte(e)}}},f=function(){var a=
{},b=0,e={add:function(f){if(e.contains(f))throw Error("dup key:"+f);a[f]=b;b+=1},size:function(){return b},indexOf:function(b){return a[b]},contains:function(b){return"undefined"!=typeof a[b]}};return e};return{setPixel:function(b,d,e){a[d*g+b]=e},write:function(c){c.writeString("GIF87a");c.writeShort(g);c.writeShort(h);c.writeByte(128);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(0);c.writeByte(255);c.writeByte(255);c.writeByte(255);c.writeString(",");c.writeShort(0);
c.writeShort(0);c.writeShort(g);c.writeShort(h);c.writeByte(0);var d;d=3;for(var e=f(),l=0;4>l;l+=1)e.add(String.fromCharCode(l));e.add(String.fromCharCode(4));e.add(String.fromCharCode(5));var l=B(),r=b(l);r.write(4,d);for(var s=0,t=String.fromCharCode(a[s]),s=s+1;s<a.length;){var m=String.fromCharCode(a[s]),s=s+1;e.contains(t+m)?t+=m:(r.write(e.indexOf(t),d),4095>e.size()&&(e.size()==1<<d&&(d+=1),e.add(t+m)),t=m)}r.write(e.indexOf(t),d);r.write(5,d);r.flush();d=l.toByteArray();c.writeByte(2);for(e=
0;255<d.length-e;)c.writeByte(255),c.writeBytes(d,e,255),e+=255;c.writeByte(d.length-e);c.writeBytes(d,e,d.length-e);c.writeByte(0);c.writeString(";")}}},G=function(g,h,a,b){for(var f=J(g,h),c=0;c<h;c+=1)for(var d=0;d<g;d+=1)f.setPixel(d,c,a(d,c));a=B();f.write(a);f=I();a=a.toByteArray();for(c=0;c<a.length;c+=1)f.writeByte(a[c]);f.flush();a='<img src="';a+="data:image/gif;base64,";a+=f;a+='"';a+=' width="';a+=g;a+='"';a+=' height="';a+=h;a+='"';b&&(a+=' alt="',a+=b,a+='"');return a+="/>"};return A}();
